# Архітектура проекту "Print Bot"

## Огляд
Бот призначений для спрощення процесу друку документів на церковному принтері через Email Printing. Він забезпечує контроль доступу, уніфікацію форматів (PDF) та збір статистики.

## Основні компоненти
### 1. Telegram Bot (Модуль `bot/`)
- Обробка повідомлень та команд.
- Меню вибору типу друку (Служіння / Особисте).
- Збір параметрів друку (кількість копій, колір, сторінки на аркуш тощо).
- Взаємодія з користувачем під час конвертації та відправки.

### 2. Google Sheets Integration (Модуль `gsheets/`)
- **Верифікація**: Перевірка `chatId` користувача у списку дозволених.
- **Логування**: Запис кожної операції друку (Хто, що, скільки сторінок, тип друку).
- **Звітність**: Генерація квартальних звітів для адміністратора.

### 3. PDF Processing (Модуль `pdf/`)
- Конвертація вхідних файлів (JPG, DOCX та інші) у PDF A4.
- Застосування параметрів (якщо можливо на рівні PDF): N-up (кількість сторінок на аркуш), примусове ч/б.
- Перевірка кількості сторінок у документі.

### 4. Email Printing Service (Модуль `mail/`)
- Формування Email з вкладенням PDF.
- Передача параметрів друку в темі або тілі листа (залежно від можливостей Email Printing принтера).
- Відправка через SMTP.

## Схема даних (Google Sheets)
### Аркуш "Користувачі"
| Telegram ID | Прізвище Ім'я | Роль | Статус |
|-------------|---------------|------|--------|

### Аркуш "Логи"
| Дата | User ID | Назва файлу | Сторінок | Копій | Тип (Служ/Особ) | Статус |
|------|---------|-------------|----------|-------|----------------|--------|

## Технологічний стек
- **Runtime**: Node.js
- **Framework**: Telegraf.js (Telegram Bot API)
- **Database**: Google Sheets API
- **PDF Lib**: pdf-lib, puppeteer (для складних форматів)
- **Email**: Nodemailer
- **Hosting**: Fly.io (згідно з `fly.toml`)
